import{L as d,b as m}from"./browser-polyfill-DaZBtFLh.js";const T=n=>n?String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):"",k=n=>{if(!n)return!1;try{const o=new URL(n);return["http:","https:"].includes(o.protocol)&&n.match(/\.(jpeg|jpg|gif|png|svg|webp)$/i)!==null}catch{return!1}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{document.dispatchEvent(new CustomEvent("steamAuthReady"))},1e3)}):setTimeout(()=>{document.dispatchEvent(new CustomEvent("steamAuthReady"))},1e3);document.addEventListener(d.RUNTIME,({detail:n})=>{const o=n.config||{},s=T(o.partnerName)||null,u=k(o.partnerLogo)?o.partnerLogo:null,f="#ffffff";let r="#18181b";o.backgroundColor&&/^#([0-9A-F]{3}){1,2}$/i.test(o.backgroundColor)&&(r=o.backgroundColor);try{const a=new Audio(m.runtime.getURL("public/notification.mp3")).play();a!==void 0&&a.catch(y=>{console.warn("Audio playback failed:",y)})}catch(t){console.error("Error playing notification sound:",t)}const e=document.createElement("div");e.setAttribute("role","alert"),e.setAttribute("aria-live","assertive");const i=document.createElement("div");if(i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.gap="8px",i.style.textAlign="center",u){const t=document.createElement("div");t.style.display="flex",t.style.justifyContent="center";const a=document.createElement("img");a.src=u,a.alt=s?`${s} Logo`:"Partner Logo",a.style.height="60px",a.style.width="60px",a.style.objectFit="contain",a.style.borderRadius="50%",t.appendChild(a),i.appendChild(t)}const l=document.createElement("div");l.style.fontWeight="600",l.style.fontSize="15px",l.textContent=s?`SteamAuth x ${s}`:"SteamAuth",i.appendChild(l);const c=document.createElement("div");c.style.fontSize="15px",c.style.opacity="0.9",c.textContent="Confirm this action in the extension!",i.appendChild(c),e.appendChild(i);let g=r;if(r.startsWith("#")){const t=r.replace("#","");g=(t.length===3?`#${t[0]}${t[0]}${t[1]}${t[1]}${t[2]}${t[2]}`:r).replace(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,(y,v,E,L)=>{const p=$=>{const S=parseInt($,16);return Math.max(0,S-25).toString(16).padStart(2,"0")};return`#${p(v)}${p(E)}${p(L)}`})}e.style.position="fixed",e.style.top="0px",e.style.right="0px",e.style.background=`linear-gradient(to bottom, ${r}, ${g})`,e.style.color=f,e.style.padding="16px",e.style.zIndex="100000",e.style.borderRadius="12px",e.style.fontFamily="'IBM Plex Sans', 'Arial', sans-serif",e.style.fontSize="13px",e.style.boxShadow="rgba(0, 0, 0, 0.3) 0px 8px 16px",e.style.margin="16px",e.style.border="1px solid rgba(255, 255, 255, 0.1)",e.style.backdropFilter="blur(10px)",e.style.maxWidth="280px",e.style.transition="opacity 0.3s ease-in-out",document.body.appendChild(e);const h=3e3,x=20,C=(s?.length||0)+30,b=Math.min(Math.max(h,C*x),6e3);setTimeout(()=>{e.style.opacity="0",setTimeout(()=>e.remove(),300)},b),m.runtime.sendMessage({eventDetails:n,listener:d.RUNTIME})});m.runtime.onMessage.addListener(({detail:n,listener:o})=>{o===d.CLIENT&&document.dispatchEvent(new CustomEvent(d.CLIENT,{detail:n}))});
