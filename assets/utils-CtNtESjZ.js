function j(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var P={exports:{}},D=P.exports,U;function q(){return U||(U=1,(function(t,A){(function(s,i){i(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:D,function(s){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)s.exports=globalThis.browser;else{const i="The message port closed before a response was received.",l=c=>{const b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class p extends WeakMap{constructor(r,g=void 0){super(g),this.createItem=r}get(r){return this.has(r)||this.set(r,this.createItem(r)),super.get(r)}}const h=e=>e&&typeof e=="object"&&typeof e.then=="function",y=(e,r)=>(...g)=>{c.runtime.lastError?e.reject(new Error(c.runtime.lastError.message)):r.singleCallbackArg||g.length<=1&&r.singleCallbackArg!==!1?e.resolve(g[0]):e.resolve(g)},w=e=>e==1?"argument":"arguments",N=(e,r)=>function(a,...o){if(o.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${w(r.minArgs)} for ${e}(), got ${o.length}`);if(o.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${w(r.maxArgs)} for ${e}(), got ${o.length}`);return new Promise((u,x)=>{if(r.fallbackToNoCallback)try{a[e](...o,y({resolve:u,reject:x},r))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),a[e](...o),r.fallbackToNoCallback=!1,r.noCallback=!0,u()}else r.noCallback?(a[e](...o),u()):a[e](...o,y({resolve:u,reject:x},r))})},v=(e,r,g)=>new Proxy(r,{apply(a,o,u){return g.call(o,e,...u)}});let E=Function.call.bind(Object.prototype.hasOwnProperty);const C=(e,r={},g={})=>{let a=Object.create(null),o={has(x,n){return n in e||n in a},get(x,n,f){if(n in a)return a[n];if(!(n in e))return;let m=e[n];if(typeof m=="function")if(typeof r[n]=="function")m=v(e,e[n],r[n]);else if(E(g,n)){let T=N(n,g[n]);m=v(e,e[n],T)}else m=m.bind(e);else if(typeof m=="object"&&m!==null&&(E(r,n)||E(g,n)))m=C(m,r[n],g[n]);else if(E(g,"*"))m=C(m,r[n],g["*"]);else return Object.defineProperty(a,n,{configurable:!0,enumerable:!0,get(){return e[n]},set(T){e[n]=T}}),m;return a[n]=m,m},set(x,n,f,m){return n in a?a[n]=f:e[n]=f,!0},defineProperty(x,n,f){return Reflect.defineProperty(a,n,f)},deleteProperty(x,n){return Reflect.deleteProperty(a,n)}},u=Object.create(e);return new Proxy(u,o)},M=e=>({addListener(r,g,...a){r.addListener(e.get(g),...a)},hasListener(r,g){return r.hasListener(e.get(g))},removeListener(r,g){r.removeListener(e.get(g))}}),K=new p(e=>typeof e!="function"?e:function(g){const a=C(g,{},{getContent:{minArgs:0,maxArgs:0}});e(a)}),R=new p(e=>typeof e!="function"?e:function(g,a,o){let u=!1,x,n=new Promise(k=>{x=function(d){u=!0,k(d)}}),f;try{f=e(g,a,x)}catch(k){f=Promise.reject(k)}const m=f!==!0&&h(f);if(f!==!0&&!m&&!u)return!1;const T=k=>{k.then(d=>{o(d)},d=>{let I;d&&(d instanceof Error||typeof d.message=="string")?I=d.message:I="An unexpected error occurred",o({__mozWebExtensionPolyfillReject__:!0,message:I})}).catch(d=>{console.error("Failed to send onMessage rejected reply",d)})};return T(m?f:n),!0}),F=({reject:e,resolve:r},g)=>{c.runtime.lastError?c.runtime.lastError.message===i?r():e(new Error(c.runtime.lastError.message)):g&&g.__mozWebExtensionPolyfillReject__?e(new Error(g.message)):r(g)},L=(e,r,g,...a)=>{if(a.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${w(r.minArgs)} for ${e}(), got ${a.length}`);if(a.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${w(r.maxArgs)} for ${e}(), got ${a.length}`);return new Promise((o,u)=>{const x=F.bind(null,{resolve:o,reject:u});a.push(x),g.sendMessage(...a)})},O={devtools:{network:{onRequestFinished:M(K)}},runtime:{onMessage:M(R),onMessageExternal:M(R),sendMessage:L.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:L.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},$={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":$},services:{"*":$},websites:{"*":$}},C(c,O,b)};s.exports=l(chrome)}})})(P)),P.exports}var H=q();const z=j(H),W=`-----BEGIN PUBLIC KEY-----
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA4pG/w2HJxB5SkwLriAyB
DoX3eRVUEfKiToq57otoduElD4UijzIdBE0rGNnN/MpsnAdFvXWJovRm3HEHgNxB
ZKsh5iVMnOAFGYDTWJT+nIYIHB+qTcBB26J5uXTquVG/aZIXBKrMNMQufMEdCA5U
S5NS1r8brxnKHKhC5kuVajm79BPENlq99z4NIXc4vmRKMUftG5Vpg9PpfK6VdEbE
2lrpTqD70uCMBE9FRglqhiJ3MCLTE9xQuq/7p187Uz7i8X8F0oEvE9oth04FfJKf
iTQJltv2tZ3gRro5ZJvr+E2i30MKHF0ZgQabNF6J/rHCSDrcQnYHu4DJmuNIjEKt
zALDH5QS9HOrTezeS46FyNGq1WODoHYg5UOKUWPfzI9lulTd5McuQAmHxUN4bU57
oV9C6bjABt8YNvV+Xb2KncWZRkz39nn1oMcC55IzlWt/1/DPw0mtPW5dNkCh0HEw
wvn+atEfH4AESMFGhmuaNwx3/dcCaU+gSGwawgNjzsCUW29Bly2/G7x567e+eQpY
pyeQFrTZOLwTYXZpvpigUgr7XXX39E7/8i5uJxLtBLtU5b4QDTeAZlzilOJ6StOv
5V79lZdv5mBqmHhd95uj1LBnZmSE58StpPd5/JkZ51gd/V/3h2kZ5Ve4AmcCpJpT
lmucl/NI2mSfehGkj1+zB7sCAwEAAQ==
-----END PUBLIC KEY-----
`,J=t=>{if(t==null)return null;if(typeof t=="object")return t;if(typeof t!="string")return null;try{return JSON.parse(t)}catch{return null}},V=(t,A=25)=>{const s=t.replace("#",""),i=s.length===3?`${s[0]}${s[0]}${s[1]}${s[1]}${s[2]}${s[2]}`:s;if(i.length!==6)return t;const l=h=>{const y=parseInt(h,16);return Math.max(0,y-A).toString(16).padStart(2,"0")},c=l(i.slice(0,2)),b=l(i.slice(2,4)),p=l(i.slice(4,6));return`#${c}${b}${p}`},Q=(t,A="24,24,27")=>{if(!t)return A;let s=t.replace("#","");if(s.length===3&&(s=`${s[0]}${s[0]}${s[1]}${s[1]}${s[2]}${s[2]}`),s.length!==6)return A;try{const i=parseInt(s.slice(0,2),16),l=parseInt(s.slice(2,4),16),c=parseInt(s.slice(4,6),16);return`${i},${l},${c}`}catch{return A}};function S(t){const A=t instanceof Uint8Array?t:new Uint8Array(t);if(typeof Buffer<"u")return Buffer.from(A).toString("base64");let s="";for(let i=0;i<A.length;i++)s+=String.fromCharCode(A[i]);return btoa(s)}function G(t){return typeof Buffer<"u"?Buffer.from(t,"utf-8").toString("base64"):btoa(t)}function Z(t){const A=t.replace(/-----BEGIN PUBLIC KEY-----/,"").replace(/-----END PUBLIC KEY-----/,"").replace(/\s+/g,""),s=atob(A),i=new Uint8Array(s.length);for(let l=0;l<s.length;l++)i[l]=s.charCodeAt(l);return i.buffer}let B=null;async function _(){if(B)return B;const t=W;return B=await crypto.subtle.importKey("spki",Z(t),{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]),B}async function Y(t){const A=await _(),s=new TextEncoder().encode(t);A.algorithm.modulusLength/8-66;try{const l=await crypto.subtle.encrypt({name:"RSA-OAEP"},A,s);return S(l)}catch{const c=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),b=crypto.getRandomValues(new Uint8Array(12)),p=await crypto.subtle.encrypt({name:"AES-GCM",iv:b,tagLength:128},c,s),h=new Uint8Array(p),y=16,w=h.slice(0,h.length-y),N=h.slice(h.length-y),v=await crypto.subtle.exportKey("raw",c),E=await crypto.subtle.encrypt({name:"RSA-OAEP"},A,v),C={encryptedKey:S(E),iv:S(b),encryptedData:S(w),tag:S(N)};return`hybrid:${G(JSON.stringify(C))}`}}export{z as b,V as d,Y as e,j as g,Q as h,J as s};
