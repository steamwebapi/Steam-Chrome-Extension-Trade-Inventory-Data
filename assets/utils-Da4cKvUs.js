function D(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var N={exports:{}},q=N.exports,F;function H(){return F||(F=1,(function(s,o){(function(n,i){i(s)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:q,function(n){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)n.exports=globalThis.browser;else{const i="The message port closed before a response was received.",m=c=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class y extends WeakMap{constructor(r,g=void 0){super(g),this.createItem=r}get(r){return this.has(r)||this.set(r,this.createItem(r)),super.get(r)}}const h=e=>e&&typeof e=="object"&&typeof e.then=="function",b=(e,r)=>(...g)=>{c.runtime.lastError?e.reject(new Error(c.runtime.lastError.message)):r.singleCallbackArg||g.length<=1&&r.singleCallbackArg!==!1?e.resolve(g[0]):e.resolve(g)},w=e=>e==1?"argument":"arguments",M=(e,r)=>function(a,...l){if(l.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${w(r.minArgs)} for ${e}(), got ${l.length}`);if(l.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${w(r.maxArgs)} for ${e}(), got ${l.length}`);return new Promise((x,f)=>{if(r.fallbackToNoCallback)try{a[e](...l,b({resolve:x,reject:f},r))}catch(t){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,t),a[e](...l),r.fallbackToNoCallback=!1,r.noCallback=!0,x()}else r.noCallback?(a[e](...l),x()):a[e](...l,b({resolve:x,reject:f},r))})},S=(e,r,g)=>new Proxy(r,{apply(a,l,x){return g.call(l,e,...x)}});let E=Function.call.bind(Object.prototype.hasOwnProperty);const C=(e,r={},g={})=>{let a=Object.create(null),l={has(f,t){return t in e||t in a},get(f,t,d){if(t in a)return a[t];if(!(t in e))return;let A=e[t];if(typeof A=="function")if(typeof r[t]=="function")A=S(e,e[t],r[t]);else if(E(g,t)){let T=M(t,g[t]);A=S(e,e[t],T)}else A=A.bind(e);else if(typeof A=="object"&&A!==null&&(E(r,t)||E(g,t)))A=C(A,r[t],g[t]);else if(E(g,"*"))A=C(A,r[t],g["*"]);else return Object.defineProperty(a,t,{configurable:!0,enumerable:!0,get(){return e[t]},set(T){e[t]=T}}),A;return a[t]=A,A},set(f,t,d,A){return t in a?a[t]=d:e[t]=d,!0},defineProperty(f,t,d){return Reflect.defineProperty(a,t,d)},deleteProperty(f,t){return Reflect.deleteProperty(a,t)}},x=Object.create(e);return new Proxy(x,l)},$=e=>({addListener(r,g,...a){r.addListener(e.get(g),...a)},hasListener(r,g){return r.hasListener(e.get(g))},removeListener(r,g){r.removeListener(e.get(g))}}),K=new y(e=>typeof e!="function"?e:function(g){const a=C(g,{},{getContent:{minArgs:0,maxArgs:0}});e(a)}),I=new y(e=>typeof e!="function"?e:function(g,a,l){let x=!1,f,t=new Promise(k=>{f=function(p){x=!0,k(p)}}),d;try{d=e(g,a,f)}catch(k){d=Promise.reject(k)}const A=d!==!0&&h(d);if(d!==!0&&!A&&!x)return!1;const T=k=>{k.then(p=>{l(p)},p=>{let U;p&&(p instanceof Error||typeof p.message=="string")?U=p.message:U="An unexpected error occurred",l({__mozWebExtensionPolyfillReject__:!0,message:U})}).catch(p=>{console.error("Failed to send onMessage rejected reply",p)})};return T(A?d:t),!0}),O=({reject:e,resolve:r},g)=>{c.runtime.lastError?c.runtime.lastError.message===i?r():e(new Error(c.runtime.lastError.message)):g&&g.__mozWebExtensionPolyfillReject__?e(new Error(g.message)):r(g)},L=(e,r,g,...a)=>{if(a.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${w(r.minArgs)} for ${e}(), got ${a.length}`);if(a.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${w(r.maxArgs)} for ${e}(), got ${a.length}`);return new Promise((l,x)=>{const f=O.bind(null,{resolve:l,reject:x});a.push(f),g.sendMessage(...a)})},j={devtools:{network:{onRequestFinished:$(K)}},runtime:{onMessage:$(I),onMessageExternal:$(I),sendMessage:L.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:L.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},R={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":R},services:{"*":R},websites:{"*":R}},C(c,j,u)};n.exports=m(chrome)}})})(N)),N.exports}var W=H();const v=D(W),G=`-----BEGIN PUBLIC KEY-----
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEA4pG/w2HJxB5SkwLriAyB
DoX3eRVUEfKiToq57otoduElD4UijzIdBE0rGNnN/MpsnAdFvXWJovRm3HEHgNxB
ZKsh5iVMnOAFGYDTWJT+nIYIHB+qTcBB26J5uXTquVG/aZIXBKrMNMQufMEdCA5U
S5NS1r8brxnKHKhC5kuVajm79BPENlq99z4NIXc4vmRKMUftG5Vpg9PpfK6VdEbE
2lrpTqD70uCMBE9FRglqhiJ3MCLTE9xQuq/7p187Uz7i8X8F0oEvE9oth04FfJKf
iTQJltv2tZ3gRro5ZJvr+E2i30MKHF0ZgQabNF6J/rHCSDrcQnYHu4DJmuNIjEKt
zALDH5QS9HOrTezeS46FyNGq1WODoHYg5UOKUWPfzI9lulTd5McuQAmHxUN4bU57
oV9C6bjABt8YNvV+Xb2KncWZRkz39nn1oMcC55IzlWt/1/DPw0mtPW5dNkCh0HEw
wvn+atEfH4AESMFGhmuaNwx3/dcCaU+gSGwawgNjzsCUW29Bly2/G7x567e+eQpY
pyeQFrTZOLwTYXZpvpigUgr7XXX39E7/8i5uJxLtBLtU5b4QDTeAZlzilOJ6StOv
5V79lZdv5mBqmHhd95uj1LBnZmSE58StpPd5/JkZ51gd/V/3h2kZ5Ve4AmcCpJpT
lmucl/NI2mSfehGkj1+zB7sCAwEAAQ==
-----END PUBLIC KEY-----
`;async function J(){try{const s=v.action??v.browserAction;if(s?.openPopup)try{await s.openPopup();return}catch{}const o=475,n=600;let i=100,m=100;try{const u=await v.windows.getCurrent();u.width&&u.left!==void 0&&u.top!==void 0&&(i=u.left+u.width-o-5,m=u.top+80)}catch{}const c=v.runtime.getURL("index.html");await v.windows.create({url:c,type:"popup",width:o,height:n,left:i,top:m,focused:!0})}catch(s){console.warn("[openExtensionPopup] Failed to open popup:",s)}}const V=s=>{if(s==null)return null;if(typeof s=="object")return s;if(typeof s!="string")return null;try{return JSON.parse(s)}catch{return null}},Q=(s,o=25)=>{const n=s.replace("#",""),i=n.length===3?`${n[0]}${n[0]}${n[1]}${n[1]}${n[2]}${n[2]}`:n;if(i.length!==6)return s;const m=h=>{const b=parseInt(h,16);return Math.max(0,b-o).toString(16).padStart(2,"0")},c=m(i.slice(0,2)),u=m(i.slice(2,4)),y=m(i.slice(4,6));return`#${c}${u}${y}`},Y=(s,o="24,24,27")=>{if(!s)return o;let n=s.replace("#","");if(n.length===3&&(n=`${n[0]}${n[0]}${n[1]}${n[1]}${n[2]}${n[2]}`),n.length!==6)return o;try{const i=parseInt(n.slice(0,2),16),m=parseInt(n.slice(2,4),16),c=parseInt(n.slice(4,6),16);return`${i},${m},${c}`}catch{return o}};function P(s){const o=s instanceof Uint8Array?s:new Uint8Array(s);if(typeof Buffer<"u")return Buffer.from(o).toString("base64");let n="";for(let i=0;i<o.length;i++)n+=String.fromCharCode(o[i]);return btoa(n)}function Z(s){return typeof Buffer<"u"?Buffer.from(s,"utf-8").toString("base64"):btoa(s)}function _(s){const o=s.replace(/-----BEGIN PUBLIC KEY-----/,"").replace(/-----END PUBLIC KEY-----/,"").replace(/\s+/g,""),n=atob(o),i=new Uint8Array(n.length);for(let m=0;m<n.length;m++)i[m]=n.charCodeAt(m);return i.buffer}let B=null;async function z(){if(B)return B;const s=G;return B=await crypto.subtle.importKey("spki",_(s),{name:"RSA-OAEP",hash:"SHA-256"},!1,["encrypt"]),B}async function X(s){const o=await z(),n=new TextEncoder().encode(s);o.algorithm.modulusLength/8-66;try{const m=await crypto.subtle.encrypt({name:"RSA-OAEP"},o,n);return P(m)}catch{const c=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),u=crypto.getRandomValues(new Uint8Array(12)),y=await crypto.subtle.encrypt({name:"AES-GCM",iv:u,tagLength:128},c,n),h=new Uint8Array(y),b=16,w=h.slice(0,h.length-b),M=h.slice(h.length-b),S=await crypto.subtle.exportKey("raw",c),E=await crypto.subtle.encrypt({name:"RSA-OAEP"},o,S),C={encryptedKey:P(E),iv:P(u),encryptedData:P(w),tag:P(M)};return`hybrid:${Z(JSON.stringify(C))}`}}export{v as b,Q as d,X as e,D as g,Y as h,J as o,V as s};
